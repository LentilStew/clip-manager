import json
from youtube_upload.youtube import check_youtube_credentials, pipe_bucket_to_youtube
from googleapiclient.http import MediaIoBaseUpload,MediaFileUpload
from settings import SETTINGS
client_config = json.loads("""
         {
            "installed": {
                "client_id": "1004465223429-peg41875rtu865m8seta6q1qlr3fg970.apps.googleusercontent.com",
                "project_id": "central-diode-389520",
                "auth_uri": "https://accounts.google.com/o/oauth2/auth",
                "token_uri": "https://oauth2.googleapis.com/token",
                "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
                "client_secret": "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",
                "redirect_uris": [
                    "http://localhost"
                ]
            }
        }
""")

token = json.loads("{\"token\": \"ya29.a0AbVbY6OyazT1b3GOnM_4Ziu5LCBSyw3ePKqnXO_jZO7ZKfysocm1UZYhiRq44ZY4RBYChuz8oTYam0fTiy1HuvrM41PY8QRyUb1BZXjRe_6N-BCaPN3V4e9cPH17yR4LpkE4DrBcZGOVyf4aoVJ9OlYx8kiXaCgYKAdMSARESFQFWKvPlMI232Zl4_8yxNTHLt_46xQ0163\", \"refresh_token\": \"1//0hTwl7UxHuNryCgYIARAAGBESNwF-L9IrT1od_wY3uF9l0_A-OA6hf3WV-gZAP7k-3GS9aFmOG95pMcZdIjtEtV0DexIb8GGTNIg\", \"token_uri\": \"https://oauth2.googleapis.com/token\", \"client_id\": \"1004465223429-peg41875rtu865m8seta6q1qlr3fg970.apps.googleusercontent.com\", \"client_secret\": \"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\", \"scopes\": [\"https://www.googleapis.com/auth/youtube.upload\"], \"expiry\": \"2023-07-01T16:52:08.308325Z\"}")
ffmpeg_command = "ffmpeg -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/fKDOJWpJmcj7QrIbsRgEIQ/AT-cm%7CfKDOJWpJmcj7QrIbsRgEIQ.mp4 -i .//inputs/transition_1s.mp4 -f lavfi -t 1 -i anullsrc=cl=mono -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/DtH1vTAtwWGwBvhjV34htw/AT-cm%7CDtH1vTAtwWGwBvhjV34htw.mp4 -i .///inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/DVSIRTzBQExHlb6FbUzkrA/AT-cm%7CDVSIRTzBQExHlb6FbUzkrA.mp4 -i .////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/NzM5x0-vIjh1rxI2T6Lsog/AT-cm%7CNzM5x0-vIjh1rxI2T6Lsog.mp4 -i ./////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/7GEREET-aULtXjNTJT_jbg/AT-cm%7C7GEREET-aULtXjNTJT_jbg.mp4 -i .//////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/fkj0UOxkQ7d942AM0BFcJA/39661916997-offset-3024.mp4 -i .///////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/463rXbCFIJ4Fw9FAiUjG4w/39661916997-offset-7130.mp4 -i .////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/6n2sAI0vIOmT6b2dSB_kHw/AT-cm%7C6n2sAI0vIOmT6b2dSB_kHw.mp4 -i ./////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/gLsnaY1NrsEGOzu3nRO9Hg/39661916997-offset-1582.mp4 -i .//////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/a2QXTcZprfrZj6EJm2IxxA/AT-cm%7Ca2QXTcZprfrZj6EJm2IxxA.mp4 -i .///////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/yx1xPGkG1DECDzyrJxofYw/39652359397-offset-7624.mp4 -i .////////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/Iufw3W4ESHhx7g-S5hKjrA/AT-cm%7CIufw3W4ESHhx7g-S5hKjrA.mp4 -i ./////////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/WGfmxkIM58-wiW9IWMv_fg/AT-cm%7CWGfmxkIM58-wiW9IWMv_fg.mp4 -i .//////////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/8qMZw0ikefFDhE2oy6kR3Q/AT-cm%7C8qMZw0ikefFDhE2oy6kR3Q.mp4 -i .///////////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/gg6nKrhBKapUqfq7EgQbqw/AT-cm%7Cgg6nKrhBKapUqfq7EgQbqw.mp4 -i .////////////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/I17deWO9HYNgQ8ajHiODHA/AT-cm%7CI17deWO9HYNgQ8ajHiODHA.mp4 -i ./////////////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/oR89Sw9q-oK18YMpZONSSw/AT-cm%7CoR89Sw9q-oK18YMpZONSSw.mp4 -i .//////////////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/FTSmu3w8GV8WelXJQuxSVA/AT-cm%7CFTSmu3w8GV8WelXJQuxSVA.mp4 -i .///////////////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/8QsF2f4hyTRWsCbe-c9v-w/39661916997-offset-4472.mp4 -i .////////////////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/v6aO_T6FrNd_j__JunSEsQ/AT-cm%7Cv6aO_T6FrNd_j__JunSEsQ.mp4 -i ./////////////////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/adEEZeVx-4z2t9Kd8W8Hnw/40834953288-offset-4404.mp4 -i .//////////////////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/m2ysoVqKWlf0VY-8P5Jxog/39661916997-offset-4880.mp4 -i .///////////////////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/uhYrdHDs4Fvtv5RS4TTT8g/39661916997-offset-9546.mp4 -i .////////////////////////inputs/transition_1s.mp4 -acodec aac -vcodec h264 -i https://clips-media-assets2.twitch.tv/BTqhGr0HH1m5-VT7ejaQUw/39646803141-offset-7342.mp4 -filter_complex [0:v]scale=1920x1080[s0];[s0]fps=24[s1];[s1]setdar=16/9[s2];[1:v]scale=1920x1080[s3];[s3]fps=24[s4];[s4]setdar=16/9[s5];[3:v]scale=1920x1080[s6];[s6]fps=24[s7];[s7]setdar=16/9[s8];[4:v]scale=1920x1080[s9];[s9]fps=24[s10];[s10]setdar=16/9[s11];[5:v]scale=1920x1080[s12];[s12]fps=24[s13];[s13]setdar=16/9[s14];[6:v]scale=1920x1080[s15];[s15]fps=24[s16];[s16]setdar=16/9[s17];[7:v]scale=1920x1080[s18];[s18]fps=24[s19];[s19]setdar=16/9[s20];[8:v]scale=1920x1080[s21];[s21]fps=24[s22];[s22]setdar=16/9[s23];[9:v]scale=1920x1080[s24];[s24]fps=24[s25];[s25]setdar=16/9[s26];[10:v]scale=1920x1080[s27];[s27]fps=24[s28];[s28]setdar=16/9[s29];[11:v]scale=1920x1080[s30];[s30]fps=24[s31];[s31]setdar=16/9[s32];[12:v]scale=1920x1080[s33];[s33]fps=24[s34];[s34]setdar=16/9[s35];[13:v]scale=1920x1080[s36];[s36]fps=24[s37];[s37]setdar=16/9[s38];[14:v]scale=1920x1080[s39];[s39]fps=24[s40];[s40]setdar=16/9[s41];[15:v]scale=1920x1080[s42];[s42]fps=24[s43];[s43]setdar=16/9[s44];[16:v]scale=1920x1080[s45];[s45]fps=24[s46];[s46]setdar=16/9[s47];[17:v]scale=1920x1080[s48];[s48]fps=24[s49];[s49]setdar=16/9[s50];[18:v]scale=1920x1080[s51];[s51]fps=24[s52];[s52]setdar=16/9[s53];[19:v]scale=1920x1080[s54];[s54]fps=24[s55];[s55]setdar=16/9[s56];[20:v]scale=1920x1080[s57];[s57]fps=24[s58];[s58]setdar=16/9[s59];[21:v]scale=1920x1080[s60];[s60]fps=24[s61];[s61]setdar=16/9[s62];[22:v]scale=1920x1080[s63];[s63]fps=24[s64];[s64]setdar=16/9[s65];[23:v]scale=1920x1080[s66];[s66]fps=24[s67];[s67]setdar=16/9[s68];[24:v]scale=1920x1080[s69];[s69]fps=24[s70];[s70]setdar=16/9[s71];[25:v]scale=1920x1080[s72];[s72]fps=24[s73];[s73]setdar=16/9[s74];[26:v]scale=1920x1080[s75];[s75]fps=24[s76];[s76]setdar=16/9[s77];[27:v]scale=1920x1080[s78];[s78]fps=24[s79];[s79]setdar=16/9[s80];[28:v]scale=1920x1080[s81];[s81]fps=24[s82];[s82]setdar=16/9[s83];[29:v]scale=1920x1080[s84];[s84]fps=24[s85];[s85]setdar=16/9[s86];[30:v]scale=1920x1080[s87];[s87]fps=24[s88];[s88]setdar=16/9[s89];[31:v]scale=1920x1080[s90];[s90]fps=24[s91];[s91]setdar=16/9[s92];[32:v]scale=1920x1080[s93];[s93]fps=24[s94];[s94]setdar=16/9[s95];[33:v]scale=1920x1080[s96];[s96]fps=24[s97];[s97]setdar=16/9[s98];[34:v]scale=1920x1080[s99];[s99]fps=24[s100];[s100]setdar=16/9[s101];[35:v]scale=1920x1080[s102];[s102]fps=24[s103];[s103]setdar=16/9[s104];[36:v]scale=1920x1080[s105];[s105]fps=24[s106];[s106]setdar=16/9[s107];[37:v]scale=1920x1080[s108];[s108]fps=24[s109];[s109]setdar=16/9[s110];[38:v]scale=1920x1080[s111];[s111]fps=24[s112];[s112]setdar=16/9[s113];[39:v]scale=1920x1080[s114];[s114]fps=24[s115];[s115]setdar=16/9[s116];[40:v]scale=1920x1080[s117];[s117]fps=24[s118];[s118]setdar=16/9[s119];[41:v]scale=1920x1080[s120];[s120]fps=24[s121];[s121]setdar=16/9[s122];[42:v]scale=1920x1080[s123];[s123]fps=24[s124];[s124]setdar=16/9[s125];[43:v]scale=1920x1080[s126];[s126]fps=24[s127];[s127]setdar=16/9[s128];[44:v]scale=1920x1080[s129];[s129]fps=24[s130];[s130]setdar=16/9[s131];[45:v]scale=1920x1080[s132];[s132]fps=24[s133];[s133]setdar=16/9[s134];[46:v]scale=1920x1080[s135];[s135]fps=24[s136];[s136]setdar=16/9[s137];[47:v]scale=1920x1080[s138];[s138]fps=24[s139];[s139]setdar=16/9[s140];[s2][0:a][s5][2][s8][3:a][s11][2][s14][5:a][s17][2][s20][7:a][s23][2][s26][9:a][s29][2][s32][11:a][s35][2][s38][13:a][s41][2][s44][15:a][s47][2][s50][17:a][s53][2][s56][19:a][s59][2][s62][21:a][s65][2][s68][23:a][s71][2][s74][25:a][s77][2][s80][27:a][s83][2][s86][29:a][s89][2][s92][31:a][s95][2][s98][33:a][s101][2][s104][35:a][s107][2][s110][37:a][s113][2][s116][39:a][s119][2][s122][41:a][s125][2][s128][43:a][s131][2][s134][45:a][s137][2][s140][47:a]concat=a=1:n=47:v=1[s141][s142] -map [s141] -map [s142] -f nut -acodec aac -crf 18 -vcodec libx264 - -y"
ffmpeg_command = ffmpeg_command.split(" ")
def main():
    request_body = {
        'snippet': {
            'title': "TEST",
            'description': "THIS IS A TEST",
            "tags": ["TASG","TAGS"],
            'category': '22'
        },
        'status': {
            'privacyStatus': 'public'
        }
    }
    
    credentials = check_youtube_credentials(token,["https://www.googleapis.com/auth/youtube.upload"],client_config=client_config)
    pipe_bucket_to_youtube(SETTINGS["gcp"]["bucket-name"],"2023/06/24/Autumn's Best Clips of June 2023",credentials=credentials,body=request_body)
    pass
if __name__ == '__main__':
    main()
    pass